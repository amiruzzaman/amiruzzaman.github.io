<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WCU CS Tutors</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      background: #f9f9f9;
      color: #333;
    }

    header {
      background-color: #800000;
      color: #fff;
      padding: 1rem;
      text-align: center;
    }

    .container {
      max-width: 1200px;
      margin: auto;
      padding: 1rem;
    }

    .tutors {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      justify-content: center;
    }

    .tutor {
      background: white;
      border-radius: 10px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      padding: 1rem;
      width: 250px;
      text-align: center;
    }

    .avatar {
      width: 100px;
      height: 120px;
      margin: 0 auto 0.5rem;
      position: relative;
    }

    /* Head (common) */
    .avatar::before {
      content: "";
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 30px;
      height: 30px;
      background: #fff;
      border-radius: 50%;
      box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.2);
    }

    /* Male torso */
    .avatar.male::after {
      content: "";
      position: absolute;
      top: 38px;
      left: 50%;
      transform: translateX(-50%);
      width: 30px;
      height: 60px;
      background: #4a89dc;
      border-radius: 6px;
    }

    .avatar.male .arm-left,
    .avatar.male .arm-right {
      position: absolute;
      top: 40px;
      width: 10px;
      height: 40px;
      background: #4a89dc;
      border-radius: 5px;
    }

    .avatar.male .arm-left {
      left: 10px;
      transform: rotate(-20deg);
    }

    .avatar.male .arm-right {
      right: 10px;
      transform: rotate(20deg);
    }

    /* Slimmer female triangle body */
    .avatar.female::after {
      content: "";
      position: absolute;
      top: 35px;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 20px solid transparent;
      border-right: 20px solid transparent;
      border-top: 60px solid #e667af;
    }

    .avatar.female .arm-left,
    .avatar.female .arm-right {
      position: absolute;
      top: 40px;
      width: 10px;
      height: 35px;
      background: #e667af;
      border-radius: 5px;
    }

    .avatar.female .arm-left {
      left: 5px;
      transform: rotate(-30deg);
    }

    .avatar.female .arm-right {
      right: 5px;
      transform: rotate(30deg);
    }

    .tutor h3 {
      margin: 0.5rem 0 0.2rem;
    }

    .tutor p {
      margin: 0.2rem 0;
    }

    .schedule-table {
      display: grid;
      gap: 1px;
      margin-top: 2rem;
      background: #ccc;
    }

    .cell {
      padding: 0.5rem;
      background: #fff;
      text-align: center;
    }

    .header-cell {
      font-weight: bold;
      background-color: #f0f0f0;
    }

    .time-cell {
      font-weight: bold;
      background-color: #f0f0f0;
    }

    .available {
      background-color: #e6ffe6;
    }

    @media (max-width: 768px) {
      .tutors {
        flex-direction: column;
        align-items: center;
      }
    }

    .checkmark {
      width: 8px;
      height: 14px;
      border: solid green;
      border-width: 0 2px 2px 0;
      transform: rotate(45deg);
      display: inline-block;
      margin: auto;
      margin-top: 4px;
    }

    .availability-list {
      text-align: left;
      margin-top: 0.5rem;
      font-size: 0.9rem;
    }

    .availability-list ul {
      padding-left: 1.2rem;
      margin: 0.2rem 0;
    }
  </style>
</head>

<body>
  <header>
    <h1>Computer Science Tutors</h1>
  </header>

  <div class="container">
    <div class="tutors" id="tutors"></div>

    <h2 style="text-align:center; margin-top:2rem">Weekly Availability Summary</h2>
    <div class="schedule-table" id="summary"></div>
  </div>

  <script>
    const tutors = [
      {
        name: "Alex Pham",
        email: "alex@wcupa.edu",
        gender: "female",
        availability: {
          "Monday": ["12pm-6pm"],
          "Wednesday": ["12pm-6pm"],
          "Friday": ["12pm-6pm"]
        }
      },
      {
        name: "Bob Smith",
        email: "bob@wcupa.edu",
        gender: "male",
        availability: {
          "Tuesday": ["11am-12pm", "2pm-4pm"],
          "Thursday": ["10am-12pm", "1pm-3pm"]
        }
      },
      {
        name: "Clara Zhang",
        email: "clara@wcupa.edu",
        gender: "female",
        availability: {
          "Monday": ["9am-11am", "2pm-4pm"],
          "Wednesday": ["9am-11am", "4pm-6pm"],
          "Friday": ["12pm-6pm"]
        }
      },
      {
        name: "David Lee",
        email: "david@wcupa.edu",
        gender: "male",
        availability: {
          "Monday": ["10am-12pm"],
          "Wednesday": ["10am-12pm", "2pm-4pm"],
          "Friday": ["9am-11am"]
        }
      },
      {
        name: "Sebastian Tran",
        email: "sebastian@wcupa.edu",
        gender: "male",
        availability: {
          "Monday": ["10am-11am", "2pm-3pm"],
          "Wednesday": ["9am-11am", "4pm-6pm"],
          "Friday": ["12pm-6pm"]
        }
      }
    ];

    // Generate tutor cards
    const tutorContainer = document.getElementById('tutors');

    tutors.forEach(tutor => {
      const div = document.createElement('div');
      div.className = 'tutor';

      const avatar = document.createElement('div');
      avatar.className = `avatar ${tutor.gender}`;
      avatar.title = tutor.name;

      const armLeft = document.createElement('div');
      armLeft.className = 'arm-left';
      const armRight = document.createElement('div');
      armRight.className = 'arm-right';

      avatar.appendChild(armLeft);
      avatar.appendChild(armRight);
      div.appendChild(avatar);

      // Format availability for display
      let availabilityHTML = '<div class="availability-list"><ul>';
      for (const day in tutor.availability) {
        availabilityHTML += `<li><strong>${day}:</strong> ${tutor.availability[day].join(', ')}</li>`;
      }
      availabilityHTML += '</ul></div>';

      div.innerHTML += `
        <h3>${tutor.name}</h3>
        <p>${tutor.email}</p>
        <p><strong>Availability:</strong></p>
        ${availabilityHTML}
      `;

      tutorContainer.appendChild(div);
    });

    // Generate schedule grid
    const daysOfWeek = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"];
    const timeSlots = [];

    // Generate time slots from 9am to 6pm in hourly increments
    for (let hour = 9; hour <= 18; hour++) {
      const period = hour >= 12 ? 'pm' : 'am';
      const displayHour = hour > 12 ? hour - 12 : hour;
      timeSlots.push(`${displayHour}${period}`);
    }

    // Create availability map
    const availabilityMap = {};
    daysOfWeek.forEach(day => {
      availabilityMap[day] = {};
      timeSlots.forEach(time => {
        availabilityMap[day][time] = [];
      });
    });

    // Populate availability map
    tutors.forEach(tutor => {
      for (const day in tutor.availability) {
        tutor.availability[day].forEach(range => {
          const [start, end] = range.split('-');
          const startTime = convertTo24Hour(start.trim());
          const endTime = convertTo24Hour(end.trim());

          // Find which time slots fall within this range
          timeSlots.forEach(slot => {
            const slotTime = convertTo24Hour(slot);
            if (slotTime >= startTime && slotTime < endTime) {
              availabilityMap[day][slot].push(tutor.name);
            }
          });
        });
      }
    });

    // Create the schedule table
    const table = document.getElementById('summary');

    // Set grid columns (1 for time column + days of week)
    table.style.gridTemplateColumns = `100px repeat(${daysOfWeek.length}, 1fr)`;

    // Add header row
    table.appendChild(createCell('', 'header-cell')); // Empty top-left cell
    daysOfWeek.forEach(day => {
      table.appendChild(createCell(day, 'header-cell'));
    });

    // Add time slots
    timeSlots.forEach(time => {
      table.appendChild(createCell(time, 'time-cell'));

      daysOfWeek.forEach(day => {
        const availableTutors = availabilityMap[day][time];
        const cell = createCell('', availableTutors.length > 0 ? 'cell available' : 'cell');

        if (availableTutors.length > 0) {
          cell.innerHTML = `<div class="checkmark"></div>`;
          cell.title = `Available tutors: ${availableTutors.join(', ')}`;
        }

        table.appendChild(cell);
      });
    });

    // Helper function to create a cell
    function createCell(content, className) {
      const cell = document.createElement('div');
      cell.className = className;
      cell.textContent = content;
      return cell;
    }

    // Helper function to convert time to 24-hour format for comparison
    function convertTo24Hour(timeStr) {
      const [time, period] = timeStr.match(/(\d+)([ap]m)/i).slice(1);
      let hour = parseInt(time, 10);

      if (period.toLowerCase() === 'pm' && hour !== 12) {
        hour += 12;
      } else if (period.toLowerCase() === 'am' && hour === 12) {
        hour = 0;
      }

      return hour;
    }
  </script>
</body>

</html>